<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="zmisc">
<title>zmisc • zmisc</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="zmisc">
<meta property="og:description" content="zmisc">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">zmisc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/zmisc.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>zmisc</h1>
            
      
      
      <div class="d-none name"><code>zmisc.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="vector-look-ups-and-safer-sampling">Vector Look-Ups and Safer Sampling<a class="anchor" aria-label="anchor" href="#vector-look-ups-and-safer-sampling"></a>
</h2>
<p>A collection of utility functions that facilitate looking up vector values from a lookup table, and support a safer approach to vector sampling, sequence generation, and aggregation.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the released version of <code>zmisc</code> from <a href="https://cran.r-project.org/package=zmisc" class="external-link">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"zmisc"</span><span class="op">)</span></code></pre></div>
<p>You can install the development version of <code>zmisc</code> from <a href="https://github.com/torfason/zmisc" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"torfason/zmisc"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>In order to use the package, you generally want to attach it first:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">zmisc</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="quick-and-easy-value-lookups">Quick and easy value lookups<a class="anchor" aria-label="anchor" href="#quick-and-easy-value-lookups"></a>
</h2>
<p>The functions <a href="https://torfason.github.io/zmisc/reference/lookup.html" class="external-link">lookup()</a> and <a href="https://torfason.github.io/zmisc/reference/lookuper.html" class="external-link">lookuper()</a> are used to look up values from a lookup table, which can be supplied as a <code>vector</code>, a <code>list</code>, or a <code>data.frame</code>. The functions are in some ways similar to the Excel function <code>VLOOKUP()</code>, but are designed to work smoothly in an R workflow, in particular within pipes.</p>
<div class="section level3">
<h3 id="lookup-lookup-values-from-a-lookup-table">lookup: Lookup values from a lookup table<a class="anchor" aria-label="anchor" href="#lookup-lookup-values-from-a-lookup-table"></a>
</h3>
<p>The <a href="https://torfason.github.io/zmisc/reference/lookup.html" class="external-link">lookup()</a> function implements lookup of certain strings (such as variable names) from an lookup table which maps keys onto values (such as variable labels or descriptions). Original values are returned if they are not found in the lookup table.</p>
<p>The lookup table can be in the form of a two-column <code>data.frame</code>, in the form of a named <code>vector</code>, or in the form of a <code>list</code>. If the table is in the form of a <code>data.frame</code>, the lookup columns should be named <code>name</code> (for the key) and <code>value</code> (for the value). If the lookup table is in the form of a named <code>vector</code> or <code>list</code>, the name is used for the key, and the returned value is taken from the values in the vector or list.</p>
<p>Any names in x are not included in the result.</p>
<div class="section level4">
<h4 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h4>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fruit_lookup_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>a<span class="op">=</span><span class="st">"Apple"</span>, b<span class="op">=</span><span class="st">"Banana"</span>, c<span class="op">=</span><span class="st">"Cherry"</span><span class="op">)</span>
<span class="fu"><a href="../reference/lookup.html">lookup</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>, <span class="va">fruit_lookup_vector</span><span class="op">)</span>

<span class="va">mtcars_lookup_data_frame</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
  name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mpg"</span>, <span class="st">"hp"</span>, <span class="st">"wt"</span><span class="op">)</span>,
  value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Miles/(US) gallon"</span>, <span class="st">"Gross horsepower"</span>, <span class="st">"Weight (1000 lbs)"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/lookup.html">lookup</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span>, <span class="va">mtcars_lookup_data_frame</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="lookuper-construct-lookup-function-based-on-a-specific-lookup-table">lookuper: Construct lookup function based on a specific lookup table<a class="anchor" aria-label="anchor" href="#lookuper-construct-lookup-function-based-on-a-specific-lookup-table"></a>
</h3>
<p>The <a href="https://torfason.github.io/zmisc/reference/lookuper.html" class="external-link">lookuper()</a> function returns <em>a function</em> equivalent to the <a href="https://torfason.github.io/zmisc/reference/lookup.html" class="external-link">lookup()</a> function, except that instead of taking a lookup table as an argument, the lookup table is embedded in the function itself.</p>
<p>This can be very useful, in particular when using the lookup function as an argument to other functions that expect a function which maps <code>character</code>-&gt;<code>character</code> but do not offer a good way to pass additional arguments to that function.</p>
<div class="section level4">
<h4 id="examples-1">Examples<a class="anchor" aria-label="anchor" href="#examples-1"></a>
</h4>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lookup_fruits</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lookuper.html">lookuper</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>a<span class="op">=</span><span class="st">"Apple"</span>, b<span class="op">=</span><span class="st">"Banana"</span>, c<span class="op">=</span><span class="st">"Cherry"</span><span class="op">)</span><span class="op">)</span>
<span class="fu">lookup_fruits</span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="safer-sampling-sequencing-and-aggregation">Safer sampling, sequencing and aggregation<a class="anchor" aria-label="anchor" href="#safer-sampling-sequencing-and-aggregation"></a>
</h2>
<p>The functions <a href="https://torfason.github.io/zmisc/reference/zample.html" class="external-link">zample()</a>, <a href="https://torfason.github.io/zmisc/reference/zeq.html" class="external-link">zeq()</a>, and <a href="https://torfason.github.io/zmisc/reference/zingle.html" class="external-link">zingle()</a> are intended to make your code less likely to break in mysterious ways when you encounter unexpected boundary conditions. The <a href="https://torfason.github.io/zmisc/reference/zample.html" class="external-link">zample()</a> and <a href="https://torfason.github.io/zmisc/reference/zeq.html" class="external-link">zeq()</a> are almost identical to the <a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/sample" class="external-link">sample()</a> and <a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/seq" class="external-link">seq()</a> functions, but a bit safer.</p>
<div class="section level3">
<h3 id="zample-sample-from-a-vector-in-a-safe-way">zample: Sample from a vector in a safe way<a class="anchor" aria-label="anchor" href="#zample-sample-from-a-vector-in-a-safe-way"></a>
</h3>
<p>The <a href="https://torfason.github.io/zmisc/reference/zample.html" class="external-link">zample()</a> function duplicates the functionality of <a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/sample" class="external-link">sample()</a>, with the exception that it does not attempt the (sometimes dangerous) user-friendliness of switching the interpretation of the first element to a number if the length of the vector is 1. <code><a href="../reference/zample.html">zample()</a></code> <em>always</em> treats its first argument as a vector containing elements that should be sampled, so your code won’t break in unexpected ways when the input vector happens to be of length 1.</p>
<div class="section level4">
<h4 id="examples-2">Examples<a class="anchor" aria-label="anchor" href="#examples-2"></a>
</h4>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># For vectors of length 2 or more, zample() and sample() are identical</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span>; <span class="fu"><a href="../reference/zample.html">zample</a></span><span class="op">(</span><span class="fl">7</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">7</span><span class="op">:</span><span class="fl">11</span><span class="op">)</span>

<span class="co"># For vectors of length 1, zample() will still sample from the vector,</span>
<span class="co"># whereas sample() will "magically" switch to interpreting the input</span>
<span class="co"># as a number n, and sampling from the vector 1:n.</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span>; <span class="fu"><a href="../reference/zample.html">zample</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span>

<span class="co"># The other arguments work in the same way as for sample()</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span>; <span class="fu"><a href="../reference/zample.html">zample</a></span><span class="op">(</span><span class="fl">7</span><span class="op">:</span><span class="fl">11</span>, size<span class="op">=</span><span class="fl">13</span>, replace<span class="op">=</span><span class="cn">TRUE</span>, prob<span class="op">=</span><span class="op">(</span><span class="fl">5</span><span class="op">:</span><span class="fl">1</span><span class="op">)</span><span class="op">^</span><span class="fl">3</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">7</span><span class="op">:</span><span class="fl">11</span>, size<span class="op">=</span><span class="fl">13</span>, replace<span class="op">=</span><span class="cn">TRUE</span>, prob<span class="op">=</span><span class="op">(</span><span class="fl">5</span><span class="op">:</span><span class="fl">1</span><span class="op">)</span><span class="op">^</span><span class="fl">3</span><span class="op">)</span>

<span class="co"># Of course, sampling more than the available elements without</span>
<span class="co"># setting replace=TRUE will result in an error</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span><span class="fu"><a href="../reference/zample.html">zample</a></span><span class="op">(</span><span class="fl">7</span>, size<span class="op">=</span><span class="fl">2</span><span class="op">)</span>, error<span class="op">=</span><span class="va">wrap_error</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="zeq-generate-sequence-in-a-safe-way">zeq: Generate sequence in a safe way<a class="anchor" aria-label="anchor" href="#zeq-generate-sequence-in-a-safe-way"></a>
</h3>
<p>The <a href="https://torfason.github.io/zmisc/reference/zeq.html" class="external-link">zeq()</a> function creates an increasing integer sequence, but differs from the standard one in that it will not silently generate a decreasing sequence when the second argument is smaller than the first. If the second argument is one smaller than the first it will generate an empty sequence, if the difference is greater, the function will throw an error.</p>
<div class="section level4">
<h4 id="examples-3">Examples<a class="anchor" aria-label="anchor" href="#examples-3"></a>
</h4>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># For increasing sequences, zeq() and seq() are identical</span>
<span class="fu"><a href="../reference/zeq.html">zeq</a></span><span class="op">(</span><span class="fl">11</span>,<span class="fl">15</span><span class="op">)</span>
<span class="fu"><a href="../reference/zeq.html">zeq</a></span><span class="op">(</span><span class="fl">11</span>,<span class="fl">11</span><span class="op">)</span>

<span class="co"># If second argument equals first-1, an empty sequence is returned</span>
<span class="fu"><a href="../reference/zeq.html">zeq</a></span><span class="op">(</span><span class="fl">11</span>,<span class="fl">10</span><span class="op">)</span>

<span class="co"># If second argument is less than first-1, the function throws an error</span>
<span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span><span class="fu"><a href="../reference/zeq.html">zeq</a></span><span class="op">(</span><span class="fl">11</span>,<span class="fl">9</span><span class="op">)</span>, error<span class="op">=</span><span class="va">wrap_error</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="zingle-return-the-single-unique-value-found-in-a-vector">zingle: Return the single (unique) value found in a vector<a class="anchor" aria-label="anchor" href="#zingle-return-the-single-unique-value-found-in-a-vector"></a>
</h3>
<p>The <a href="https://torfason.github.io/zmisc/reference/zingle.html" class="external-link">zingle()</a> function returns the first element in a vector, but only if all the other elements are identical to the first one (the vector only has a <code>zingle</code> value). If the elements are not all identical, it throws an error. The vector must contain at least one non-<code>NA</code> value, or the function errors out as well. This is especially useful in aggregations, when all values in a given group should be identical, but you want to make sure.</p>
<div class="section level4">
<h4 id="examples-4">Examples<a class="anchor" aria-label="anchor" href="#examples-4"></a>
</h4>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># If all elements are identical, all is good.</span>
<span class="co"># The value of the element is returned.</span>
<span class="fu"><a href="../reference/zingle.html">zingle</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Alpha"</span>, <span class="st">"Alpha"</span>, <span class="st">"Alpha"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># If any elements differ, an error is thrown</span>
<span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span><span class="fu"><a href="../reference/zingle.html">zingle</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Alpha"</span>, <span class="st">"Beta"</span>, <span class="st">"Alpha"</span><span class="op">)</span><span class="op">)</span>, error<span class="op">=</span><span class="va">wrap_error</span><span class="op">)</span>

<span class="kw">if</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://dplyr.tidyverse.org" class="external-link">"dplyr"</a></span>, quietly<span class="op">=</span><span class="cn">TRUE</span>, warn.conflicts<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span>
    <span class="op">~</span><span class="va">id</span>, <span class="op">~</span><span class="va">name</span>, <span class="op">~</span><span class="va">fouls</span>,
    <span class="fl">1</span>, <span class="st">"James"</span>, <span class="fl">3</span>,
    <span class="fl">2</span>, <span class="st">"Jack"</span>,  <span class="fl">2</span>,
    <span class="fl">1</span>, <span class="st">"James"</span>, <span class="fl">4</span>
  <span class="op">)</span>

  <span class="co"># If the data is of the correct format, all is good</span>
  <span class="va">d</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>name<span class="op">=</span><span class="fu"><a href="../reference/zingle.html">zingle</a></span><span class="op">(</span><span class="va">name</span><span class="op">)</span>, total_fouls<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">fouls</span><span class="op">)</span><span class="op">)</span>
 <span class="op">}</span>

<span class="kw">if</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://dplyr.tidyverse.org" class="external-link">"dplyr"</a></span>, quietly<span class="op">=</span><span class="cn">TRUE</span>, warn.conflicts<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="co"># If a name does not match its ID, we should get an error</span>
  <span class="va">d</span><span class="op">[</span><span class="fl">1</span>,<span class="st">"name"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Jammes"</span>
  <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span><span class="op">{</span>
    <span class="va">d</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>name<span class="op">=</span><span class="fu"><a href="../reference/zingle.html">zingle</a></span><span class="op">(</span><span class="va">name</span><span class="op">)</span>, total_fouls<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">fouls</span><span class="op">)</span><span class="op">)</span>
  <span class="op">}</span>, error<span class="op">=</span><span class="va">wrap_error</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Magnus Thor Torfason.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
