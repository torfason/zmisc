<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Lookup values from a lookup table — lookup • zmisc</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Lookup values from a lookup table — lookup"><meta name="description" content="The lookup() function implements lookup of values (such as variable names)
from a lookup table which maps keys onto values (such as variable labels or
descriptions).
The lookup table can be in the form of a two-column data.frame, in the form
of a named vector, or in the form of a list. If the table is in the form
of a data.frame, the key column should be named either key or name, and
the value column should be named value (for the value). If the lookup table
is in the form of a named vector or list, the names are used as the key,
and the returned value is taken from the values in the vector or list.
The underlying lookup is done using base::match(), and all atomic data
types except factor are supported. Factors are omitted due to the ambiguity
in what should be looked up (the values or the levels). It is important that
x, .default and the columns of lookup_table are all of the same type
(specifically of the same base::mode()). If the lookup table is specified
as a vector or list, only the character variables are supported,
because name(lookup_table) is always of mode character.
Original values are returned if they are not found in the lookup table.
Alternatively, a .default can be specified for values that are not found.
Note that it is possible to specify NA as one of the keys to look up
NA values (only when using a data.frame as lookup table).
Any names or attributes of x are preserved.
The lookuper() function returns a function equivalent to the lookup()
function, except that instead of taking a lookup table as an argument, the
lookup table is embedded in the function itself.
This can be very useful, in particular when using the lookup function as an
argument to other functions that expect a function which maps
character-&amp;gt;character (or other data types), but do not offer a good way
to pass additional arguments to that function."><meta property="og:description" content="The lookup() function implements lookup of values (such as variable names)
from a lookup table which maps keys onto values (such as variable labels or
descriptions).
The lookup table can be in the form of a two-column data.frame, in the form
of a named vector, or in the form of a list. If the table is in the form
of a data.frame, the key column should be named either key or name, and
the value column should be named value (for the value). If the lookup table
is in the form of a named vector or list, the names are used as the key,
and the returned value is taken from the values in the vector or list.
The underlying lookup is done using base::match(), and all atomic data
types except factor are supported. Factors are omitted due to the ambiguity
in what should be looked up (the values or the levels). It is important that
x, .default and the columns of lookup_table are all of the same type
(specifically of the same base::mode()). If the lookup table is specified
as a vector or list, only the character variables are supported,
because name(lookup_table) is always of mode character.
Original values are returned if they are not found in the lookup table.
Alternatively, a .default can be specified for values that are not found.
Note that it is possible to specify NA as one of the keys to look up
NA values (only when using a data.frame as lookup table).
Any names or attributes of x are preserved.
The lookuper() function returns a function equivalent to the lookup()
function, except that instead of taking a lookup table as an argument, the
lookup table is embedded in the function itself.
This can be very useful, in particular when using the lookup function as an
argument to other functions that expect a function which maps
character-&amp;gt;character (or other data types), but do not offer a good way
to pass additional arguments to that function."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">zmisc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.3.9006</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/zmisc.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/torfason/zmisc/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Lookup values from a lookup table</h1>
      <small class="dont-index">Source: <a href="https://github.com/torfason/zmisc/blob/main/R/lookup.R" class="external-link"><code>R/lookup.R</code></a></small>
      <div class="d-none name"><code>lookup.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>lookup()</code> function implements lookup of values (such as variable names)
from a lookup table which maps keys onto values (such as variable labels or
descriptions).</p>
<p>The lookup table can be in the form of a two-column <code>data.frame</code>, in the form
of a named <code>vector</code>, or in the form of a <code>list</code>. If the table is in the form
of a <code>data.frame</code>, the key column should be named either <code>key</code> or <code>name</code>, and
the value column should be named <code>value</code> (for the value). If the lookup table
is in the form of a named <code>vector</code> or <code>list</code>, the names are used as the key,
and the returned value is taken from the values in the vector or list.</p>
<p>The underlying lookup is done using <code><a href="https://rdrr.io/r/base/match.html" class="external-link">base::match()</a></code>, and all atomic data
types except <code>factor</code> are supported. Factors are omitted due to the ambiguity
in what should be looked up (the values or the levels). It is important that
<code>x</code>, <code>.default</code> and the columns of <code>lookup_table</code> are all of the same type
(specifically of the same <code><a href="https://rdrr.io/r/base/mode.html" class="external-link">base::mode()</a></code>). If the lookup table is specified
as a <code>vector</code> or <code>list</code>, only the <code>character</code> variables are supported,
because <code>name(lookup_table)</code> is always of mode <code>character</code>.</p>
<p>Original values are returned if they are not found in the lookup table.
Alternatively, a <code>.default</code> can be specified for values that are not found.
Note that it is possible to specify <code>NA</code> as one of the keys to look up
NA values (only when using a <code>data.frame</code> as lookup table).</p>
<p>Any names or attributes of x are preserved.</p>
<p>The <code>lookuper()</code> function returns <em>a function</em> equivalent to the <code>lookup()</code>
function, except that instead of taking a lookup table as an argument, the
lookup table is embedded in the function itself.</p>
<p>This can be very useful, in particular when using the lookup function as an
argument to other functions that expect a function which maps
<code>character</code>-&gt;<code>character</code> (or other data types), but do not offer a good way
to pass additional arguments to that function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">lookup</span><span class="op">(</span><span class="va">x</span>, <span class="va">lookup_table</span>, <span class="va">...</span>, .default <span class="op">=</span> <span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">lookuper</span><span class="op">(</span><span class="va">lookup_table</span>, <span class="va">...</span>, .default <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A vector whose elements are to be looked up.</p></dd>


<dt id="arg-lookup-table">lookup_table<a class="anchor" aria-label="anchor" href="#arg-lookup-table"></a></dt>
<dd><p>The lookup table to use.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Reserved for future use.</p></dd>


<dt id="arg--default">.default<a class="anchor" aria-label="anchor" href="#arg--default"></a></dt>
<dd><p>If a value is not found in the lookup table, the value will
be taken from <code>.default</code>. This must be a vector of the same mode as x, and
either of length 1 or the same length as x. Useful values include <code>x</code> (the
default setting), <code>NA</code>, or <code>""</code> (an empty string). Specifying <code>.default = NULL</code> implies that <code>x</code> will be used for missing values.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The <code>lookup()</code> function returns a vector based on <code>x</code>, with
values replaced with the lookup values from <code>lookup_table</code>. Any values not
found in the lookup table are taken from <code>.default</code>.</p>
<p>The <code>lookuper()</code> function returns <em>a function</em> that takes vectors as
its argument <code>x</code>, and returns either the corresponding values from the
underlying lookup table, or the original values from x for those elements
that are not found in the lookup table (or looks them up from the
<code>default</code>).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">fruit_lookup_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>a <span class="op">=</span> <span class="st">"Apple"</span>, b <span class="op">=</span> <span class="st">"Banana"</span>, c <span class="op">=</span> <span class="st">"Cherry"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">lookup</span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>, <span class="va">fruit_lookup_vector</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Apple"  "Banana" "Cherry" "d"      "e"     </span>
<span class="r-in"><span><span class="fu">lookup</span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>, <span class="va">fruit_lookup_vector</span>, .default <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Apple"  "Banana" "Cherry" NA       NA      </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">mtcars_lookup_data_frame</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mpg"</span>, <span class="st">"hp"</span>, <span class="st">"wt"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Miles/(US) gallon"</span>, <span class="st">"Gross horsepower"</span>, <span class="st">"Weight (1000 lbs)"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">lookup</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span>, <span class="va">mtcars_lookup_data_frame</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "Miles/(US) gallon" "cyl"               "disp"             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4] "Gross horsepower"  "drat"              "Weight (1000 lbs)"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "qsec"              "vs"                "am"               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10] "gear"              "carb"             </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># A more complex example, with numeric and NA values</span></span></span>
<span class="r-in"><span><span class="va">numeric_lookup_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="cn">NA</span><span class="op">)</span>, value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>, <span class="fl">99999</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">lookup</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">6</span>, <span class="cn">NA</span><span class="op">)</span>, <span class="va">numeric_lookup_table</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]     0.000000     1.000000     1.414214     1.732051     2.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6]     2.236068     6.000000 99999.000000</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lookup_fruits</span> <span class="op">&lt;-</span> <span class="fu">lookuper</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>a <span class="op">=</span> <span class="st">"Apple"</span>, b <span class="op">=</span> <span class="st">"Banana"</span>, c <span class="op">=</span> <span class="st">"Cherry"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">lookup_fruits</span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Apple"  "Banana" "Cherry" "d"      "e"     </span>
<span class="r-in"><span><span class="va">lookup_fruits_nomatch_na</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu">lookuper</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>a <span class="op">=</span> <span class="st">"Apple"</span>, b <span class="op">=</span> <span class="st">"Banana"</span>, c <span class="op">=</span> <span class="st">"Cherry"</span><span class="op">)</span>, .default <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">lookup_fruits_nomatch_na</span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Apple"  "Banana" "Cherry" NA       NA      </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Magnus Thor Torfason.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

